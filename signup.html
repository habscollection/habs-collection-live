<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Sign Up - Habs Collection</title>
   <link rel="stylesheet" href="/css/styles.css">
   <link rel="stylesheet" href="/css/animations.css">
   <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500&family=Montserrat:wght@200;300;400&display=swap" rel="stylesheet">
   <style>
       .auth-container {
           max-width: 500px;
           margin: 150px auto 80px;
           padding: 40px;
           background-color: var(--background-color);
           border: 1px solid rgba(0,0,0,0.1);
       }
       
       .auth-title {
           font-family: 'Cormorant Garamond', serif;
           text-align: center;
           margin-bottom: 30px;
           font-size: 32px;
           letter-spacing: 2px;
           color: var(--primary-color);
       }
       
       .auth-form {
           display: flex;
           flex-direction: column;
           gap: 20px;
       }
       
       .form-row {
           display: flex;
           gap: 15px;
       }
       
       .form-group {
           display: flex;
           flex-direction: column;
           gap: 8px;
           flex: 1;
       }
       
       .form-group label {
           font-size: 14px;
           color: var(--primary-color);
           font-weight: 400;
           letter-spacing: 1px;
       }
       
       .form-group input {
           padding: 12px;
           border: 1px solid rgba(0,0,0,0.1);
           background-color: #fff;
           font-family: 'Montserrat', sans-serif;
           font-size: 14px;
       }
       
       .form-group input:focus {
           outline: none;
           border-color: var(--accent-color);
       }
       
       .auth-button {
           margin-top: 10px;
           padding: 12px;
           background-color: var(--primary-color);
           color: var(--secondary-color);
           border: none;
           font-family: 'Montserrat', sans-serif;
           font-size: 14px;
           letter-spacing: 1px;
           cursor: pointer;
           transition: background-color 0.3s;
       }
       
       .auth-button:hover {
           background-color: var(--accent-color);
       }
       
       .auth-footer {
           margin-top: 30px;
           text-align: center;
           font-size: 14px;
       }
       
       .auth-footer a {
           color: var(--accent-color);
           text-decoration: none;
       }
       
       .auth-footer a:hover {
           text-decoration: underline;
       }
       
       .form-error {
           color: #d9534f;
           font-size: 13px;
           margin-top: 5px;
       }
       
       .alert {
           padding: 12px;
           margin-bottom: 20px;
           border-radius: 2px;
           font-size: 14px;
       }
       
       .alert-danger {
           background-color: #f8d7da;
           color: #721c24;
           border: 1px solid #f5c6cb;
       }
       
       .alert-success {
           background-color: #d4edda;
           color: #155724;
           border: 1px solid #c3e6cb;
       }
       
       @media (max-width: 768px) {
           .auth-container {
               margin: 120px 20px 60px;
               padding: 30px 20px;
           }
           
           .form-row {
               flex-direction: column;
               gap: 20px;
           }
       }
   </style>
</head>
<body>
   <!-- Announcement Bar -->
   <div class="announcement-bar">
       <p>EID-AL-ADHA SALE NOW ON - ORDER BY WEDNESDAY 4TH JUNE 2025</p>
   </div>

   <nav class="navbar">
       <div class="nav-left">
           <a href="products.html">EID-AL ADHA SALE NOW ON</a>
       </div>
       <div class="nav-center">
           <a href="/" class="brand-logo">HABS COLLECTION</a>
       </div>
       <div class="nav-right">
           <a href="/account.html" class="nav-icon">Account</a>
           <a href="cart.html" class="nav-icon">Cart (<span class="cart-count">0</span>)</a>
       </div>

       <div class="mobile-nav-right">
           <a href="/account.html" class="nav-icon">
               <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                   <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                   <circle cx="12" cy="7" r="4"></circle>
               </svg>
           </a>
           <a href="cart.html" class="nav-icon">
               <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                   <circle cx="9" cy="21" r="1"></circle>
                   <circle cx="20" cy="21" r="1"></circle>
                   <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
               </svg>
               <span class="cart-count">0</span>
           </a>
       </div>

       <button class="mobile-menu-toggle" aria-label="Toggle Menu">
           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
               <line x1="3" y1="12" x2="21" y2="12"></line>
               <line x1="3" y1="6" x2="21" y2="6"></line>
               <line x1="3" y1="18" x2="21" y2="18"></line>
           </svg>
       </button>
   </nav>

    <!-- Mobile Menu -->
    <div class="mobile-menu-overlay"></div>
    <div class="mobile-menu">
        <button class="mobile-menu-close">&times;</button>
        <a href="products.html">EID-AL ADHA SALE NOW ON</a>
        <a href="/account.html">Account</a>
        <a href="cart.html">Cart (<span class="cart-count">0</span>)</a>
    </div>

   <main>
       <div class="auth-container">
           <h1 class="auth-title">CREATE ACCOUNT</h1>
           <div id="alert-container"></div>
           <form id="signup-form" class="auth-form">
               <div class="form-row">
                   <div class="form-group">
                       <label for="firstName">First Name</label>
                       <input type="text" id="firstName" name="firstName" required>
                       <div class="form-error" id="firstName-error"></div>
                   </div>
                   <div class="form-group">
                       <label for="lastName">Last Name</label>
                       <input type="text" id="lastName" name="lastName" required>
                       <div class="form-error" id="lastName-error"></div>
                   </div>
               </div>
               <div class="form-group">
                   <label for="email">Email</label>
                   <input type="email" id="email" name="email" required>
                   <div class="form-error" id="email-error"></div>
               </div>
               <div class="form-group">
                   <label for="password">Password</label>
                   <input type="password" id="password" name="password" required>
                   <div class="form-error" id="password-error"></div>
               </div>
               <div class="form-group">
                   <label for="confirmPassword">Confirm Password</label>
                   <input type="password" id="confirmPassword" name="confirmPassword" required>
                   <div class="form-error" id="confirmPassword-error"></div>
               </div>
               <button type="submit" class="auth-button">CREATE ACCOUNT</button>
           </form>
           <div class="auth-footer">
               <p>Already have an account? <a href="/login.html">Log in</a></p>
           </div>
       </div>
   </main>

   <!-- Updated Footer -->
   <footer class="site-footer">
    <div class="footer-container">
        <div class="footer-grid">
            <div class="footer-section">
                <h4>LATEST COLLECTION</h4>
                <ul>
                    <li><a href="#abayas">ABAYAS</a></li>
                    <li><a href="#dresses">DRESSES</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>CUSTOMER SERVICE</h4>
                <ul>
                    <li><a href="#contact">Contact Us</a></li>
                    <li><a href="#shipping">Shipping Information</a></li>
                    <li><a href="#returns">Returns & Exchanges</a></li>
                    <li><a href="#size-guide">Size Guide</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>ABOUT</h4>
                <ul>
                    <li><a href="about.html">Our Story</a></li>
                    <li><a href="#sustainability">Sustainability</a></li>
                    <li><a href="#stores">Stores</a></li>
                </ul>
            </div>

            <div class="footer-section newsletter">
                <h4>NEWSLETTER</h4>
                <p>Subscribe to receive updates, access to exclusive deals, and more.</p>
                <form class="newsletter-form">
                    <div class="input-group">
                        <input type="email" placeholder="Enter your email address" required>
                        <button type="submit">Subscribe</button>
                    </div>
                </form>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div class="footer-left">
                <p>Â© 2024 - HABS COLLECTION</p>
            </div>
            <div class="footer-right">
            </div>
        </div>
    </div>
</footer>

<script>
    // Mobile menu functionality
    const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
    const mobileMenu = document.querySelector('.mobile-menu');
    const mobileMenuOverlay = document.querySelector('.mobile-menu-overlay');
    const mobileMenuClose = document.querySelector('.mobile-menu-close');

    function toggleMobileMenu() {
        mobileMenu.classList.toggle('active');
        mobileMenuOverlay.classList.toggle('active');
        mobileMenuToggle.classList.toggle('active');
        document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : '';
    }

    mobileMenuToggle.addEventListener('click', toggleMobileMenu);
    mobileMenuClose.addEventListener('click', toggleMobileMenu);
    mobileMenuOverlay.addEventListener('click', toggleMobileMenu);

    // Close mobile menu when clicking on a link
    const mobileMenuLinks = mobileMenu.querySelectorAll('a');
    mobileMenuLinks.forEach(link => {
        link.addEventListener('click', toggleMobileMenu);
    });

    // Signup form validation and submission
    document.getElementById('signup-form').addEventListener('submit', async function(event) {
        event.preventDefault();
        
        // Clear previous error messages
        document.querySelectorAll('.form-error').forEach(el => el.textContent = '');
        document.getElementById('alert-container').innerHTML = '';
        
        // Get form data
        const firstName = document.getElementById('firstName').value.trim();
        const lastName = document.getElementById('lastName').value.trim();
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        
        // Validate form data
        let hasError = false;
        
        if (!firstName) {
            document.getElementById('firstName-error').textContent = 'First name is required';
            hasError = true;
        }
        
        if (!lastName) {
            document.getElementById('lastName-error').textContent = 'Last name is required';
            hasError = true;
        }
        
        if (!email) {
            document.getElementById('email-error').textContent = 'Email is required';
            hasError = true;
        } else if (!/^\S+@\S+\.\S+$/.test(email)) {
            document.getElementById('email-error').textContent = 'Please enter a valid email address';
            hasError = true;
        }
        
        if (!password) {
            document.getElementById('password-error').textContent = 'Password is required';
            hasError = true;
        } else if (password.length < 8) {
            document.getElementById('password-error').textContent = 'Password must be at least 8 characters long';
            hasError = true;
        }
        
        if (!confirmPassword) {
            document.getElementById('confirmPassword-error').textContent = 'Please confirm your password';
            hasError = true;
        } else if (password !== confirmPassword) {
            document.getElementById('confirmPassword-error').textContent = 'Passwords do not match';
            hasError = true;
        }
        
        if (hasError) return;
        
        try {
            // Submit signup request
            const response = await fetch('/api/auth/signup', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ firstName, lastName, email, password })
            });
            
            const data = await response.json();
            
            if (!response.ok) {
                // Show error message
                const alertHTML = `<div class="alert alert-danger">${data.error || 'Registration failed. Please try again.'}</div>`;
                document.getElementById('alert-container').innerHTML = alertHTML;
                return;
            }
            
            // Store user data and token
            localStorage.setItem('user', JSON.stringify(data.user));
            localStorage.setItem('token', data.token);
            
            // Show success message and redirect to account page
            document.getElementById('alert-container').innerHTML = `
                <div class="alert alert-success">Account created successfully! Redirecting to your account...</div>
            `;
            
            setTimeout(() => {
                window.location.href = '/account.html';
            }, 1500);
            
        } catch (error) {
            console.error('Registration error:', error);
            const alertHTML = `<div class="alert alert-danger">An error occurred. Please try again later.</div>`;
            document.getElementById('alert-container').innerHTML = alertHTML;
        }
    });

    // Update cart count on page load
    document.addEventListener('DOMContentLoaded', function() {
        // Get cart from localStorage
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        const cartCount = cart.reduce((total, item) => total + item.quantity, 0);
        
        // Update all cart count displays
        document.querySelectorAll('.cart-count-display, .cart-count, .mobile-cart-count').forEach(el => {
            el.textContent = cartCount;
        });
        
        // Check if user is already logged in
        const token = localStorage.getItem('token');
        if (token) {
            // Redirect to account page if already logged in
            window.location.href = '/account.html';
        }
    });
</script>
</body>
</html> 
